I"”<hr />
<p>layout:     post           <br />
 title:      æ„å»ºwebugæµ‹è¯•ç¯å¢ƒ   <br />
 subtitle:   ä½¿ç”¨dockeræ„å»ºwebugé¶æœºç¯å¢ƒ       <br />
 date:       2020-04-17           <br />
 author:     suleo                <br />
 header-img: img/post-bg-keybord.jpg  <br />
 catalog: true                    <br />
 tags:                            <br />
     - æ¸—é€æµ‹è¯• <br />
 â€”</p>

<h1 id="å‰è¨€">å‰è¨€</h1>

<blockquote>
  <p>WeBugåç§°å®šä¹‰ä¸ºâ€æˆ‘ä»¬çš„æ¼æ´â€é¶åœºç¯å¢ƒ ï¼ŒåŸºç¡€ç¯å¢ƒæ˜¯åŸºäºPHP/mysqlåˆ¶ä½œæ­å»ºè€Œæˆï¼Œä¸­çº§ç¯å¢ƒä¸é«˜çº§ç¯å¢ƒåˆ†åˆ«éƒ½æ˜¯ç”±äº’è”ç½‘æ¼æ´äº‹ä»¶è€Œæ”¶é›†çš„æ¼æ´å­˜åœ¨çš„æ“ä½œç¯å¢ƒã€‚åœ¨webug3.0å‘å¸ƒåçš„å››ç™¾å¤šå¤©226å®‰å…¨å›¢é˜Ÿç»ˆäºåœ¨å¤§å¹´åˆäºŒå‘å¸ƒäº†webugçš„4.0ç‰ˆæœ¬ã€‚</p>

  <p>Webug4.0å®˜ç½‘åœ°å€ï¼š<code class="highlighter-rouge">https://www.webug.org</code>
Webug4.0å®˜æ–¹æºç ï¼š<code class="highlighter-rouge">https://github.com/wangai3176/webug4.0</code>
Webug4.0å®‰è£…ä»‹ç»ï¼š<code class="highlighter-rouge">https://www.freebuf.com/column/195521.html</code>
åŸºäºé¡¹ç›®çš„æºç æ­å»ºäº†ä¸€ä¸ªDockerç‰ˆæœ¬çš„Webug4.0ï¼Œå·²ç»pushåˆ°äº†Docker hubï¼Œæ¬¢è¿å¤§å®¶ä¸‹è½½æ¥ç©~
å¬å¾ˆå¤šå°ä¼™ä¼´è¯´æœ‰æ—¶å€™è‡ªå·±æ­å»ºçš„æ—¶å€™ï¼Œç”±äºphpç‰ˆæœ¬é—®é¢˜å¯¼è‡´æœ‰äº›æ³¨å…¥é¢˜åšä¸äº†ï¼Œè¿™ç‚¹æˆ‘åšDockeré•œåƒçš„æ—¶å€™æƒ³åˆ°äº†ï¼Œç„¶åæ­å»ºå®Œæœ¬åœ°æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ³¨å…¥é¢˜æ²¡é—®é¢˜ã€‚</p>
</blockquote>

<h1 id="æ„å»ºè¿‡ç¨‹">æ„å»ºè¿‡ç¨‹</h1>

<p>é¦–å…ˆæ˜¯ä¸‹è½½äº†Webug4.0ç‰ˆæœ¬çš„æºç ï¼Œç„¶åç¼–å†™Dockerfile
Dockerfileå†…å®¹å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM ubuntu:trusty
MAINTAINER Area39@163.com
RUN echo "deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse"&gt; /etc/apt/sources.list
RUN apt-get update \
        &amp;&amp; apt-get install -y mysql-server apache2 php5 php5-mysql
COPY sql /root/
RUN /etc/init.d/mysql start &amp;&amp;\
    mysql -e "grant all privileges on *.* to 'root'@'%' identified by 'toor';"&amp;&amp;\
    mysql -e "grant all privileges on *.* to 'root'@'localhost' identified by 'toor';"&amp;&amp;\
    mysql -u root -ptoor -e "show databases;" &amp;&amp;\
    mysql -u root -ptoor --default-character-set=utf8 &lt;/root/webug.sql &amp;&amp;\
    mysql -u root -ptoor -e "show databases;" &amp;&amp;\
    mysql -u root -ptoor &lt;/root/webug_sys.sql &amp;&amp;\
    mysql -u root -ptoor -e "show databases;" &amp;&amp;\
    mysql -u root -ptoor &lt;/root/webug_width_byte.sql &amp;&amp;\
    mysql -u root -ptoor -e "show databases;"
RUN sed -Ei 's/^(bind-address|log)/#&amp;/' /etc/mysql/my.cnf \
	&amp;&amp; echo 'skip-host-cache\nskip-name-resolve' | awk '{ print } $1 == "[mysqld]" &amp;&amp; c == 0 { c = 1; system("cat") }' /etc/mysql/my.cnf &gt; /tmp/my.cnf \
	&amp;&amp; mv /tmp/my.cnf /etc/mysql/my.cnf
COPY webug /var/www/html
RUN rm /var/www/html/index.html &amp;&amp;\
 chown www-data:www-data /var/www/html -R &amp;&amp;\
 rm -rf /root/*
COPY httpd-foreground /usr/bin
EXPOSE 80
CMD ["httpd-foreground"]
</code></pre></div></div>

<p>åœ¨è¿™é‡Œè¸©äº†ä¸ªå‘ï¼ŒDockerfileç¬¬11è¡Œ<code class="highlighter-rouge">mysql -u root -ptoor ï¼Œç”±äºå¯¼å…¥æ•°æ®åº“æ–‡ä»¶æ—¶æ²¡æŒ‡å®šå­—ç¬¦é›†ï¼Œæ‰€ä»¥ç›´æ¥ä¹±ç äº†ã€‚è§£å†³æ–¹æ³•ï¼š</code>mysql -u root -ptoor â€“default-character-set=utf8 æŒ‡å®šä¸ºutf8å°±å¯ä»¥äº†ã€‚</p>

<h1 id="æ­å»ºæ–¹å¼">æ­å»ºæ–¹å¼</h1>

<ul>
  <li>é€šè¿‡Dockerfile</li>
  <li>é€šè¿‡Docker hub</li>
</ul>

<h2 id="é€šè¿‡dockerfileæ­å»º">é€šè¿‡Dockerfileæ­å»º</h2>

<p>é¡¹ç›®å·²ç»ä¼ åˆ°äº†Githubï¼Œ<a href="https://github.com/Area39/Webug4.0-Docker">ä¼ é€é—¨</a>
ç›®å½•ç»“æ„
<a href="https://tva4.sinaimg.cn/large/007DFXDhgy1g5nckxhmv5j30uk04uq38.jpg"><img src="https://tva4.sinaimg.cn/large/007DFXDhgy1g5nckxhmv5j30uk04uq38.jpg" alt="img" /></a>
ç„¶ååœ¨æœ¬ç›®å½•ä¸‹è¾“å…¥<code class="highlighter-rouge">docker build -t webug:4.0 .</code>
<a href="https://tva4.sinaimg.cn/large/007DFXDhgy1g5ncmy9y7fj316d0er401.jpg"><img src="https://tva4.sinaimg.cn/large/007DFXDhgy1g5ncmy9y7fj316d0er401.jpg" alt="img" /></a>
ç¨ç­‰ç‰‡åˆ»ï¼Œä½ çš„Webugå°±æ­å»ºå®Œæˆäº†ã€‚
å¯åŠ¨Webug:4.0å®¹å™¨
<code class="highlighter-rouge">docker run -d -P webug:4.0</code>
<a href="https://tva3.sinaimg.cn/large/007DFXDhly1g5ncr0avthj314s06274n.jpg"><img src="https://tva3.sinaimg.cn/large/007DFXDhly1g5ncr0avthj314s06274n.jpg" alt="img" /></a>
ç„¶åè®¿é—®ip+æ˜ å°„çš„ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°åå°ç™»å½•ç•Œé¢
<a href="https://tva3.sinaimg.cn/large/007DFXDhgy1g5ncp6v58fj31650kqgmd.jpg"><img src="https://tva3.sinaimg.cn/large/007DFXDhgy1g5ncp6v58fj31650kqgmd.jpg" alt="img" /></a>
é»˜è®¤è´¦å·ï¼š</p>

<ul>
  <li>åå°ç®¡ç†å‘˜ï¼šadmin/admin</li>
  <li>æ•°æ®åº“å¯†ç ï¼šroot/toor</li>
</ul>

<p><a href="https://tva3.sinaimg.cn/large/007DFXDhgy1g5nctcdvatj31hc0sc77j.jpg"><img src="https://tva3.sinaimg.cn/large/007DFXDhgy1g5nctcdvatj31hc0sc77j.jpg" alt="img" /></a></p>

<h2 id="é€šè¿‡docker-hubæ­å»º">é€šè¿‡Docker hubæ­å»º</h2>

<p>ä¸ºäº†å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œå·²ç»pushåˆ°äº†docker hubä¸Šé¢ã€‚
ä»Docker hubä¸Šæ‹‰å–é•œåƒ
<code class="highlighter-rouge">docker pull area39/webug</code>
<a href="https://tva2.sinaimg.cn/large/007DFXDhgy1g5nd0z95hyj30yf0bzdgu.jpg"><img src="https://tva2.sinaimg.cn/large/007DFXDhgy1g5nd0z95hyj30yf0bzdgu.jpg" alt="img" /></a>
å¯åŠ¨è¿‡ç¨‹
<code class="highlighter-rouge">docker run -d -P area39/webug</code>
<a href="https://tva3.sinaimg.cn/large/007DFXDhly1g5oprxekjnj314w052dg7.jpg"><img src="https://tva3.sinaimg.cn/large/007DFXDhly1g5oprxekjnj314w052dg7.jpg" alt="img" /></a>
æ­¤æ—¶ä½ çš„Webugå°±èƒ½ä½¿ç”¨å•¦ã€‚
<a href="https://tva4.sinaimg.cn/large/007DFXDhgy1g5nd8tcujij31460ne0ti.jpg"><img src="https://tva4.sinaimg.cn/large/007DFXDhgy1g5nd8tcujij31460ne0ti.jpg" alt="img" /></a></p>
:ET